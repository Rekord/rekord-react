{"version":3,"sources":["rekord-react.min.js"],"names":["global","Rekord","React","undefined","Sync","component","target","property","set","this","notify","on","isRekord","prototype","Database","off","$change","unmount","componentWillUnmount","apply","arguments","state","setState","forceUpdate"],"mappings":"CACA,SAAWA,EAAQC,EAAQC,EAAOC,GAIlC,QAASC,GAAMC,EAAWC,EAAQC,EAAUC,GAE1C,MAAOC,gBAAgBL,IAKvBK,KAAKJ,UAAYA,EACjBI,KAAKH,OAASA,EACdG,KAAKF,SAAWA,EAEXC,GAEHC,KAAKC,aAGPD,MAAKE,MAZI,GAAIP,GAAMC,EAAWC,GAN9B,GAAIM,GAAWX,EAAOW,QAqBxBR,GAAKS,WAEHF,GAAI,WAEF,GAAIL,GAASG,KAAKH,MAEbM,GAAUN,KAEbA,EAASG,KAAKH,OAASA,EAAOQ,SAGhC,IAAIC,GAAMN,KAAKM,IAAMT,EAAQA,EAAOU,QAAU,UAAY,UAAYP,KAAKC,OAAQD,MAE/EQ,EAAUR,KAAKJ,UAAUa,oBAE7BT,MAAKJ,UAAUa,qBAAuB,WAE/BD,GAEHA,EAAQE,MAAOV,KAAMW,WAGvBL,MAGJL,OAAQ,WAEN,GAAKD,KAAKF,SACV,CACE,GAAIc,KACJA,GAAOZ,KAAKF,UAAaE,KAAKH,OAE9BG,KAAKJ,UAAUiB,SAAUD,OAIzBZ,MAAKJ,UAAUkB,gBAMnBtB,EAAOG,KAAOA,GAEZK,KAAMA,KAAKR,OAAQQ,KAAKP","file":"rekord-react.min.js","sourcesContent":["/* rekord-react 1.4.1 - A rekord binding to React - adding Rekord.Sync by Philip Diffenderfer */\n(function (global, Rekord, React, undefined)\n{\n  var isRekord = Rekord.isRekord;\n\nfunction Sync( component, target, property, set )\n{\n  if ( !(this instanceof Sync) )\n  {\n    return new Sync( component, target );\n  }\n\n  this.component = component;\n  this.target = target;\n  this.property = property;\n\n  if ( set )\n  {\n    this.notify();\n  }\n\n  this.on();\n}\n\nSync.prototype =\n{\n  on: function()\n  {\n    var target = this.target;\n\n    if ( isRekord( target ) )\n    {\n      target = this.target = target.Database;\n    }\n\n    var off = this.off = target[ target.$change ? '$change' : 'change' ]( this.notify, this );\n\n    var unmount = this.component.componentWillUnmount;\n\n    this.component.componentWillUnmount = function()\n    {\n      if ( unmount )\n      {\n        unmount.apply( this, arguments );\n      }\n\n      off();\n    };\n  },\n  notify: function()\n  {\n    if ( this.property )\n    {\n      var state = {};\n      state[ this.property ] = this.target;\n\n      this.component.setState( state );\n    }\n    else\n    {\n      this.component.forceUpdate();\n    }\n  }\n};\n\n\n  Rekord.Sync = Sync;\n\n})( this, this.Rekord, this.React );\n"],"sourceRoot":"/source/"}